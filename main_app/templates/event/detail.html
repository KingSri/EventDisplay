{% extends 'base.html' %}
{% load static %}
{% block content %}

<h1>Event Cache</h1>

<div class="row">
  <div class="col s6">
    <div class="card">
      <div class="card-content">
        <img src="{{event.photo.url}}"/>
        <span class="card-title">{{ event.title }}</span>
        <p>Description: {{ event.description }}</p>
        <p>Start Time: {{ event.start_time }}</p>
      </div>
      <div id="like-section">
        {% include 'event/like_section.html' %}
        </div>

      {% if event.user == request.user %}

      <div class="card-action">
        <a href="{% url 'update_event' event.id %}">Edit Event</a>
        <a href="{% url 'delete_event' event.id %}">Delete Event</a>
      </div>
      {% endif %}


    </div>


    <br><br>
    <hr>
    <form method='post'>
      {%csrf_token%}
      {{ comment_form.as_p}}
      {% if request.user.is_authenticated %}
      <input type="submit" value="submit" class="btn">
      {% else %}
      <input type="submit" value="submit" class="btn" disabled>
      {% endif %}
    </form>

    <div class = 'main-comment-section'>
      {{comments.count}} Comment{{ comments|pluralize }}
      {% for comment in comments %}
      <blockquote>
        <p class="mb-0">{{comment.content}}</p>
        <footer class="blockquote-footer">-<cite> {{comment.user|capfirst}}</cite></footer>
      </blockquote>
      {% endfor %}

      </div>

</div>
</div>

{% endblock %}
